!function(t){var p={},d={};t.almy={create:function(){p={},d={}},getState:function(t){return t?p[t]:p},dispatch:function(t,i,o,e){if(t&&"string"==typeof t&&(p[t]!==i||o)){if(p[t]=i,d[t])for(var n=0;n<d[t].length;++n)d[t][n](i);if("object"==typeof i&&!e)for(var s in i)i.hasOwnProperty(s)&&this.dispatch(t+"->"+s,i[s],o,!0);if(/->/.test(t)&&!e){var f=t.split("->"),r=f[0],a=f[1];if(void 0===p[r]){var c={};c[a]=i,this.dispatch(r,c,!0,!0)}else p[r][a]=i,this.dispatch(r,p[r],!0,!0)}}},subscribe:function(t,i){void 0===d[t]&&(d[t]=[]),d[t].push(i),void 0!==p[t]&&i(p[t])}}}("object"==typeof module?module.exports:window);